<!DOCTYPE html>
<html>
<head>
	
	<link rel="stylesheet" href="style-custom.css" />
	<link rel="stylesheet" href="leaflet/leaflet.css" />
	<link rel="stylesheet" href="leafletdraw/leaflet.draw.css" />
	<link rel="stylesheet" href="leafletsearch/leaflet-search.src.css" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	
	<script src="layers.js"></script>
	<script src="events.js"></script>
	<script src="functions.js"></script>
	<script src="leaflet/leaflet-src.js"></script>
	<script src="leafletdraw/leaflet.draw-src.js"></script>
	<script src="jquery/jquery-1.12.1.js"></script>
	<script src="leafletsearch/leaflet-search.src.js"></script>
	<script src="sosi/SOSI.js"></script>
	<script src="underscore-1.8.3/underscore.js"></script>
	
	
	
</head>

<body>
	<div id="mapid"></div>
	
	<script>
		//Enable search function?
		var enableSearching = true;

		//Base layers
		var useOsmLayer = true;
		var useKartverkTopo2Layer = true;
		var useKartverkTopo3Layer = true;
		var useKartverSjoPapirLayer = true;

		//Overlay layers
		var useDrawAndMaplyticDB = false;	//draw and DB combined	OR	
		var useLeafletDraw = false;			//separete draw and/or
		var useMaplyticData = false;		//seperate DB
		var useFylkeGeoJsonData = true;
		var useKommuneGeoJsonData = false;
		var useGrunnkretsGeoJsonData = false;
		var useHelseStasjonData = true;
		var useBarnehageData = true;
		var useToalett = true;
		var useBomstasjon = true;

		//test
		var useManualTestGeoData = false;
		var useTestPopup = false;

		//MAP
			var mymap = L.map('mapid', { 
			center: [58.8534, 5.7317],
			zoom: 13
		});

			var awesomeData;

		//sets up base map layers
		var baseMaps = setupBaseLayers(mymap);
		//sets up overlay layers
		var overlayMaps = setupOverlayLayers(mymap);	

		 //Layer control
		L.control.layers(baseMaps, overlayMaps).addTo(mymap);		
	

		if( enableSearching ){
			setupSearch(mymap);
		}	
	 
		events(mymap); 


		// //create a parser
		// var parser = new SOSI.Parser();

		// //creates and empty GeoJSON test Layer
		// var my_data;

		// $.get('0101.SOS', function(data) {
		// 	my_data = data;
		// 	//parse SOSI-data (must be a newline-separated string!)
		// 	var sosidata = parser.parse(my_data);
		// 	//get as GeoJSON
		// 	var geojson = sosidata.dumps("geojson");
		// });

		console.log("finished seting up map!"); 
		 	 
	</script>	
</body>
</html>